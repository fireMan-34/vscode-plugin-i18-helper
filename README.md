# i18n 个人使用插件

## 打包
1. 不要使用 yarn(应该可以用), pnpm 管理器, vsce 至今未支持
2. 修改默认 README.md
3. 添加版权信息 LICENSE

## 功能
  目前我的插件功能很简单，基于 formatMessage 一个是复制国际化键值对，第二个是国际化代码智能提示
1. 复制国际化键值对生成 `fromatMessage({id: 'xxx', defaultMessage: 'xxx',})`;
2. 扫描国际化目录，在资源菜单中，选择文件夹右键，目前支持 `locals` `local` 以及从配置里写入的配置
3. 在 ts 、 js 代码中输入 `formatMessage({})` 这样的代码就会自动读取从项目中扫描的国际化提示，目前会根据一个默认语言配置来读取对应的语法 token，然后自动输出 `{id: 'xxx', defaultMessage: 'xxx'}` 的代码内容。

## 计划
- [x] 支持 jsx，tsx智能提示
- [x] 国际化悬浮信息 (粗略完成)
- [x] 文件位置关联 (粗略完成)
- [x] 根据键值对动态生成扫描代码配置
- [x] 完善扫描代码分步计划 (目前在执行清理无效配置后，自动重新执行扫描命令，适配右键菜单合，执行上下文类型)
- [x] 文本自动生成代填充 key:value 形式 填充到项目文件夹中
- [ ] 翻译 Api (开发中……) 这里有一些问题，目前没有想好如何消费这些，还有提供这些文本翻译
  - [ ] 项目内非国际化目录下单文本翻译多语种如何消费，或者不该使用
  - [ ] 在国际化目录下如何生成任务文本
    - [ ] 依据国际化 key 规则识别
    - [ ] 依据配置识别，然后依靠询问的方式进行配置，似乎上面的约定，比这个好，不过这个是我最初的想法。
    - [ ] 获取任务文与根目录，生成对应文件，进行读写。 
  - [ ] 对接翻译平台 Api
    - [x] 百度
    - [ ] 彩云
    - [ ] 谷歌
    - [ ] Deep
    - [x] 网易
    - [ ] 腾讯
- [ ] 国际化视图
  - [x] 扫描目录规则输出文件规则配置
  - [x] 扫描目录时启用规则命令 
- [ ] 项目非国际化目录生成可识别的国际化文本
- [ ] 扫描默认语种字符串，并读取现有可读国际化作用域作为输出
- [ ] 新增额外的自动录入国际化文本（路径采用多级询问，自动创建，同步，读写 ts, js, json 能力的方式）
- [x] 动态模板生成动态正则作为解析
- [x] 识别可翻译字符串或者关键 key 生成国际化代码
  - [x] 添加是否询问配置
  - [ ] 添加动态启用识别功能

## pakcage 部分注释参考
### 如何编写类似 复制为 这样的子级的菜单
  我一开始以为需要写在 menus 这里面，的确是，但是我少了一个层级。原先的隶属菜单属于 `editor/context` 后面参考 https://github.com/microsoft/vscode/issues/100172#issuecomment-645203070 以及灵机一动终于搞懂了，我缺少了一个层级，如果是自定义的多级菜单，则需要把父级菜单注册到 submenus 这个字里面，否则就无需处理。